<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Introduction to Shadow DOM — WebComponents.org</title><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1"><meta name="google-site-verification" content="px-LvGmZP4t9mI3QVcWkTYciiRbToixpY-F-NfIybaE"><meta name="author" content="Community"><meta name="description" content="Shadow DOM is an emerging web standard that gives developers access to style and DOM scoping. Learn how to use it on your own website.
"><meta name="theme-color" content="#3a99d7"><meta property="og:title" content="Introduction to Shadow DOM — WebComponents.org"><meta property="og:image" content="http://webcomponents.org/img/stories/devbytes-shadowdom.png"><meta property="og:url" content="http://webcomponents.org/articles/introduction-to-shadow-dom"><meta property="og:description" content="Shadow DOM is an emerging web standard that gives developers access to style and DOM scoping. Learn how to use it on your own website.
"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Introduction to Shadow DOM — WebComponents.org"><meta name="twitter:description" content="Shadow DOM is an emerging web standard that gives developers access to style and DOM scoping. Learn how to use it on your own website.
"><meta name="twitter:image" content="http://webcomponents.org/img/stories/devbytes-shadowdom.png"><meta name="twitter:site" content="@Web_Components"><link rel="stylesheet" href="http://webcomponents.org/css/main.min.css"><link rel="stylesheet" href="http://webcomponents.org/css/syntax-highlight.min.css"><!--[if lt IE 10]>
    <link rel="stylesheet" media="all" href="http://webcomponents.org/css/ielt10.min.css">
    <![endif]--><link rel="icon" type="image/x-icon" href="http://webcomponents.org/img/favicon.ico"><link rel="publisher" href="https://plus.google.com/+WebcomponentsOrg"><script src="//use.typekit.net/ksn6mlw.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><div class="page-wrap"><header class="header-bar" role="banner"><div class="wrapper"><a class="logo" href="http://webcomponents.org"><img src="http://webcomponents.org/img/logo.svg" alt="WebComponents.org" width="60" height="39"> </a><a class="menu-button"><span></span> <span></span> <span></span></a><nav class="nav desktop-only" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement"><ul><li class="nav-item"><a href="http://webcomponents.org/" class="nav-link" title="Home" itemprop="url"><span itemprop="name">Home</span></a></li><li class="nav-item"><a href="http://webcomponents.org/polyfills/" class="nav-link" title="Polyfills" itemprop="url"><span itemprop="name">Polyfills</span></a></li><li class="nav-item nav-active"><a href="http://webcomponents.org/articles/" class="nav-link" title="Articles" itemprop="url"><span itemprop="name">Articles</span></a></li><li class="nav-item"><a href="http://webcomponents.org/presentations/" class="nav-link" title="Presentations" itemprop="url"><span itemprop="name">Presentations</span></a></li><li class="nav-item"><a href="http://webcomponents.org/podcasts/" class="nav-link" title="Podcasts" itemprop="url"><span itemprop="name">Podcasts</span></a></li><li class="nav-item"><a href="http://webcomponents.org/resources/" class="nav-link" title="Resources" itemprop="url"><span itemprop="name">Resources</span></a></li></ul></nav><script>(function() {
            var cx = '006706517617519397807:s_k6dwkdtby';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
        })();</script><div class="search-box desktop-only"><gcse:search></gcse:search></div></div></header><div class="wrapper"><main class="layout-single" role="main" itemscope itemtype="http://schema.org/TechArticle"><div class="single-content" role="article"><section class="card card-story" role="region"><div class="story-image"><img src="http://webcomponents.org/img/stories/devbytes-shadowdom.png" alt="Introduction to Shadow DOM" itemprop="image"></div><p class="title" itemprop="name">Introduction to Shadow DOM</p><div class="post-info" role="complementary"><p class="post-author">By <a href="https://twitter.com/agektmr" target="_blank">Eiji Kitamura</a></p><p class="post-date" itemprop="datePublished"><span class="icon-clock"></span> October 29th, 2014</p></div><div class="description" itemprop="text"><p>Shadow DOM is an emerging web standard that gives developers access to style and DOM scoping. Learn how to use it on your own website.</p><div class="iframe-wrap"><iframe src="//www.youtube.com/embed/Is4FZxKGqqk"></iframe></div><hr><h2 id="what-is-shadow-dom-">What is Shadow DOM?</h2><p><img src="/img/stories/shadowdom-video.png" alt="HTML5 video tag"></p><p>Here&#39;s a video rendered in the browser using the HTML video tag. While the code is as simple as a single tag, the video has built-in controls.</p><pre class="highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">video</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"http://craftymind.com/factory/html5video/BigBuckBunny_640x360.mp4"</span> <span class="hljs-attribute">controls</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">video</span>&gt;</span>
</code></pre><p>If you open up the DevTools and turn on &#39;Show user agent shadow DOM&#39;, we can actually look at the source for the video controls.</p><p><img src="/img/stories/shadowdom-settings.png" alt="Show user agent shadow DOM"></p><p>And you&#39;ll see that they&#39;re actually made of HTML. This is an example of using the Shadow DOM.</p><p><img src="/img/stories/shadowdom-devtools.png" alt="Shadow DOM in DevTools"></p><p>The nice thing about Shadow DOM is that you can actually use this feature in your own components.</p><h2 id="structure-of-a-shadow-dom">Structure of a Shadow DOM</h2><p>An element that has a shadow root associated with it is called &quot;shadow host&quot;. The shadow root can be treated as an ordinary DOM element so you can append arbitrary nodes to it.</p><p><img src="/img/stories/shadowdom-architecture.png" alt="Structure of a Shadow DOM"></p><p>With Shadow DOM, all markup and CSS are scoped to the host element. In other words, CSS styles defined inside a Shadow Root won&#39;t affect its parent document, CSS styles defined outside the Shadow Root won&#39;t affect the main page.</p><h2 id="how-i-build-a-shadow-dom">How I build a Shadow DOM</h2><p>In order to create a Shadow DOM, invoke <code>.createShadowRoot()</code> on a DOM node and obtain a Shadow Root. By adding elements to the Shadow Root, you can build Shadow DOM.</p><pre class="highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"host"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre><pre class="highlight"><code class="hljs javascript"><span class="hljs-keyword">var</span> host = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#host'</span>);
<span class="hljs-keyword">var</span> root = host.createShadowRoot(); <span class="hljs-comment">// Create a Shadow Root</span>
<span class="hljs-keyword">var</span> div = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'div'</span>);
div.textContent = <span class="hljs-string">'This is Shadow DOM'</span>;
root.appendChild(div); <span class="hljs-comment">// Append elements to the Shadow Root</span>
</code></pre><p>Notice that elements added to the Shadow Root won&#39;t be queried. In this case <code>document.querySelector(&#39;#host div&#39;)</code> results in <code>null</code>.</p><h2 id="reflecting-the-shadow-host-s-content-to-a-shadow-dom">Reflecting the Shadow Host&#39;s content to a Shadow DOM</h2><p>Sometimes you may want to project the child elements of a Shadow Host into a Shadow DOM.</p><p>Imagine you want the similar functionality to the combination of <code>&lt;select&gt;</code> and <code>&lt;option&gt;</code>. They are separate tags but make sense as a select menu when used together.</p><p>With Shadow DOM, you can do this for example: A name tag that is styled in the Shadow DOM, but needs to pull in the user&#39;s name from an external input.</p><p><img src="/img/stories/shadowdom-content.png" alt="Shadow DOM name tag example"></p><pre class="highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"nameTag"</span>&gt;</span>Bob<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre><p>In order to achieve this, you can use <code>&lt;content&gt;</code> element inside the Shadow DOM.</p><pre class="highlight"><code class="hljs javascript"><span class="hljs-keyword">var</span> host = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#host'</span>);
<span class="hljs-keyword">var</span> root = host.createShadowRoot();
<span class="hljs-keyword">var</span> content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'content'</span>);
content.setAttribute(<span class="hljs-string">'select'</span>, <span class="hljs-string">'h1'</span>); <span class="hljs-comment">// &lt;content select="h1"&gt;&lt;/content&gt;</span>
root.appendChild(content);
</code></pre><pre class="highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"host"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>This is Shadow DOM<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">div</span>&gt;</span>
</code></pre><p>By giving <code>&lt;content&gt;</code> tag a <code>select</code> attribute with CSS selector as a value, you can distribute host&#39;s content to wherever you want.</p><p>Note that <code>select</code> attribute can only take direct children of the host element. For example, you can NOT assign descendant elements to the <code>select</code> attribute:</p><pre class="highlight"><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"host"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"child"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>This is Shadow DOM<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">content</span> <span class="hljs-attribute">select</span>=<span class="hljs-value">".child h1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">content</span>&gt;</span> // Not allowed
</code></pre><h2 id="combining-with-templates">Combining with Templates</h2><p>Shadow DOM is fantastic as you have learned so far, but adding contents imperatively isn&#39;t that efficient and is not designer friendly. Instead, you may wish to use HTML to define your content.</p><p>Here&#39;s where the <code>&lt;template&gt;</code> element comes in. Using the template element, you can define contents of your Shadow DOM declaratively with HTML. To learn about the &lt;template&gt; element, check out <a href="http://webcomponents.org/articles/introduction-to-template-element/">the previous post</a>.</p><pre class="highlight"><code class="hljs xml"><span class="hljs-comment">&lt;!-- Content of &lt;template&gt; will be appended to the Shadow Root --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">template</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"template"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">style</span>&gt;</span><span class="css">
    ...
  </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"http://webcomponents.org/img/logo.svg"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">content</span> <span class="hljs-attribute">select</span>=<span class="hljs-value">"h1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">content</span>&gt;</span> // Insert h1 here
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"host"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>This is Shadow DOM<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre><pre class="highlight"><code class="hljs javascript"><span class="hljs-keyword">var</span> host = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#host'</span>);
<span class="hljs-comment">// Create a Shadow Root</span>
<span class="hljs-keyword">var</span> root = host.createShadowRoot();
<span class="hljs-keyword">var</span> template = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">'#template'</span>);
<span class="hljs-comment">// Copy the &lt;template&gt;</span>
<span class="hljs-keyword">var</span> clone = <span class="hljs-built_in">document</span>.importNode(template.content, <span class="hljs-literal">true</span>);
<span class="hljs-comment">// Append template to the Shadow Root</span>
root.appendChild(clone);
</code></pre><p><a href="http://jsbin.com/bahera/4/edit?html,js,output">Here&#39;s a live example.</a></p><h2 id="supported-browsers">Supported browsers</h2><p>Shadow DOM is supported by Chrome and Opera. Firefox supports it behind a flag as of October 2014. To check availability, go to <a href="http://caniuse.com/#search=components">caniuse.com</a>. For polyfilling other browsers, you can use <a href="https://github.com/polymer/platform">platform.js</a> (<a href="https://blog.polymer-project.org/announcements/2014/10/16/platform-becomes-webcomponents/">renamed</a> as webcomponents.js in Nov. 2014).</p><h2 id="resources">Resources</h2><p>So that is the very basic of the Shadow DOM. But this is only the tip of iceberg. There&#39;s tons of interesting things to learn around Shadow DOM such as</p><ul><li>Styling</li><li>Event handling</li><li>Working with multiple Shadow Roots</li></ul><p>If you are interested in learning them, check out following pages:</p><ul><li><a href="http://goo.gl/1cxTS7">Shadow DOM 101</a></li><li><a href="http://www.html5rocks.com/tutorials/webcomponents/shadowdom-201/">Shadow DOM 201</a></li><li><a href="http://www.html5rocks.com/tutorials/webcomponents/shadowdom-301/">Shadow DOM 301</a></li><li><a href="http://www.w3.org/TR/shadow-dom/">Shadow DOM Specification</a></li></ul><p>Head to <a href="http://webcomponents.org/tags/shadow-dom/">posts tagged with Shadow DOM</a> to learn even more.</p></div></section><div class="card card-comments"><div id="disqus_thread"></div><script>var disqus_shortname = 'webcomponentsorg';

                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();</script></div></div><div class="single-sidebar"><section class="card card-author" role="region" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="author-avatar" src="https://2.gravatar.com/avatar/bffa1782705a3b1a2bcd2135cea1858c" alt="Eiji Kitamura" itemprop="image"><p class="author-name" itemprop="name">Eiji Kitamura</p><p class="author-twitter"><a href="https://twitter.com/agektmr" target="_blank" itemprop="url">@agektmr</a></p><p class="author-bio" itemprop="description">Eiji is a Developer Advocate at Google. Eiji works closely with web application developers, helping them understand HTML5 and open web technologies.</p></section><section class="card card-tags" role="region" itemscope itemtype="http://schema.org/ItemList"><h3 itemprop="name">Tags</h3><ul class="tag-list"><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ItemList"><a href="/tags/introduction" itemprop="url"><span class="icon icon-tag"></span> <span itemprop="name">Introduction</span></a></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ItemList"><a href="/tags/shadow-dom" itemprop="url"><span class="icon icon-tag"></span> <span itemprop="name">Shadow DOM</span></a></li><li itemprop="itemListElement" itemscope itemtype="http://schema.org/ItemList"><a href="/tags/template" itemprop="url"><span class="icon icon-tag"></span> <span itemprop="name">Template</span></a></li></ul></section></div></main></div></div><div class="aux-nav"><nav class="wrapper" role="navigation" itemscope itemtype="http://schema.org/SiteNavigationElement"><ul><li>Learn</li><li><a href="http://webcomponents.org/articles/" title="Articles" itemprop="url"><span itemprop="name">Articles</span></a></li><li><a href="http://webcomponents.org/presentations/" title="Presentations" itemprop="url"><span itemprop="name">Presentations</span></a></li><li><a href="http://webcomponents.org/podcasts/" title="Podcasts" itemprop="url"><span itemprop="name">Podcasts</span></a></li></ul><ul><li>Code</li><li><a href="http://webcomponents.org/polyfills/" title="Polyfills" itemprop="url"><span itemprop="name">Polyfills</span></a></li><li><a href="http://webcomponents.org/resources/" title="Resources" itemprop="url"><span itemprop="name">Resources</span></a></li></ul><ul><li>Community</li><li><a href="http://webcomponents.org/about/" title="About" itemprop="url"><span itemprop="name">About</span></a></li><li><a href="http://webcomponents.org/assets/" title="Assets" itemprop="url"><span itemprop="name">Assets</span></a></li><li><a href="http://webcomponents.org/swags/" title="Swags" itemprop="url"><span itemprop="name">Swags</span></a></li></ul></nav></div><footer class="credits" role="contentinfo"><div class="wrapper"><p>Made with <span class="love">♥</span> by the <a target="_blank" class="credits-link" href="https://github.com/webcomponents/webcomponents.github.io/graphs/contributors" itemprop="publisher">WebComponents.org contributors.</a></p><ul class="social-buttons"><li class="tweet-btn"><iframe src="http://platform.twitter.com/widgets/tweet_button.1359159993.html#_=1360010161235&amp;count=horizontal&amp;id=twitter-widget-0&amp;lang=en&amp;size=m&amp;url=http://webcomponents.org&amp;text=WebComponents.org ~ A place to discuss and evolve Web Component best-practices" class="twitter-share-button twitter-count-horizontal" data-twttr-rendered="true" allowtransparency="true" frameborder="0" scrolling="no" width="100" height="20"></iframe></li><li class="fb-btn"><iframe src="//www.facebook.com/plugins/like.php?href=http://webcomponents.org&amp;send=false&amp;layout=button_count&amp;width=100&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=20&amp;appId=176947299114210" allowtransparency="true" frameborder="0" scrolling="no" width="85" height="20"></iframe></li><li class="gplus-btn"><iframe src="https://plusone.google.com/_/+1/fastbutton?bsv&amp;size=medium&amp;hl=en-US&amp;url=http://webcomponents.org&amp;parent=http://webcomponents.org" allowtransparency="true" frameborder="0" scrolling="no" width="70" height="20"></iframe></li><li class="github-btn"><iframe src="http://ghbtns.com/github-btn.html?user=webcomponents&amp;repo=webcomponents.github.io&amp;type=watch&amp;count=true&amp;size=small" allowtransparency="true" frameborder="0" scrolling="0" width="85" height="20"></iframe></li></ul></div></footer><script src="http://webcomponents.org/js/main.js"></script><script>window.__insp = window.__insp || [];
__insp.push(['wid', 1646634871]);
(function() {
    function __ldinsp(){var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); }
    if (window.attachEvent){
        window.attachEvent('onload', __ldinsp);
    }else{
        window.addEventListener('load', __ldinsp, false);
    }
})();</script><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-47408119-2']);
_gaq.push(['_trackPageview']);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>